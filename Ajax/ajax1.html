<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Ajax 1 - 请求纯文本</title>
</head>
<body>
	<button id="button">请求纯文本</button>
	<br><br>
	<text id="text"></text>

	<script type="text/javascript">
		document.getElementById('button').addEventListener("click",loadText);
		function loadText(){
			// console.log("Hello World!");
			// 创建XMLHttpRequest对象
			var xhr = new XMLHttpRequest();

			// open(type,url/file,async)
			xhr.open("GET",'sample.txt',true);

			// onprogress 加载动画
			// xhr.onprogress = function(){
			// 	console.log(this.readyState);
			// }


			// 两种方式请求 onload / onreadystatechange
			// onload:只能监听readystate为1和4的情况
			xhr.onload = function(){
				if(this.status == 200 && this.readyState == 4){
					document.getElementById('text').innerHTML = this.responseText;
				}else if(this.status == 404){
					document.getElementById('text').innerHTML = "NOT Found";
				}
			}
			// xhr.onreadystatechange = function(){
			// 	if(this.status == 200 && this.readyState == 4){
			// 		console.log(this.responseText);
			// 	}else if(this.status == 404){
			// 		console.log("NOT Found");
			// 	}				
			// }

			// 发送请求
			xhr.send();

		}

		// readyState 状态码
		// 0： 请求未初始化
		// 1： 服务器连接已建立
		// 2： 请求已接收
		// 3： 请求处理中
		// 4： 请求已完成，切响应已就绪

		// HTTP 状态码
		// 200 - 服务器成功返回网页
		// 404 - 请求的网页不存在
		// 503 - 服务器暂时不可用
	</script>
</body>
</html>